<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>函数图像教学动画 - 二次函数交互绘图</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        #container {
            flex: 1;
            position: relative;
            width: 100%;
            height: 100%;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            text-align: center;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 300px;
        }
        #formula {
            font-size: 24px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="container">
        <canvas id="graphCanvas"></canvas>
        <div id="controls">
            <div id="formula">y = ax² + bx + c</div>
            <label for="a">参数 a: <span id="aValue">1</span></label>
            <input type="range" id="a" min="-2" max="2" step="0.1" value="1">
            
            <label for="b">参数 b: <span id="bValue">0</span></label>
            <input type="range" id="b" min="-5" max="5" step="0.1" value="0">
            
            <label for="c">参数 c: <span id="cValue">0</span></label>
            <input type="range" id="c" min="-10" max="10" step="0.5" value="0">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        
        let a = 1, b = 0, c = 0;
        
        const aSlider = document.getElementById('a');
        const bSlider = document.getElementById('b');
        const cSlider = document.getElementById('c');
        const aValue = document.getElementById('aValue');
        const bValue = document.getElementById('bValue');
        const cValue = document.getElementById('cValue');
        const formula = document.getElementById('formula');
        
        function resizeCanvas() {
            canvas.width = canvas.clientWidth;
            canvas.height = canvas.clientHeight;
            drawGraph();
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // 初始调整
        
        function updateValues() {
            a = parseFloat(aSlider.value);
            b = parseFloat(bSlider.value);
            c = parseFloat(cSlider.value);
            
            aValue.textContent = a.toFixed(1);
            bValue.textContent = b.toFixed(1);
            cValue.textContent = c.toFixed(1);
            
            formula.textContent = `y = ${a >= 0 ? '' : '-'}${Math.abs(a).toFixed(1)}x² ${b >= 0 ? '+' : '-'} ${Math.abs(b).toFixed(1)}x ${c >= 0 ? '+' : '-'} ${Math.abs(c).toFixed(1)}`;
            
            drawGraph();
        }
        
        aSlider.addEventListener('input', updateValues);
        bSlider.addEventListener('input', updateValues);
        cSlider.addEventListener('input', updateValues);
        
        function drawGraph() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // 绘制坐标轴
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // 绘制网格和刻度
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            const scaleX = 50; // 每个单位50像素
            const scaleY = 50;
            
            for (let i = -20; i <= 20; i++) {
                if (i !== 0) {
                    ctx.beginPath();
                    ctx.moveTo(centerX + i * scaleX, 0);
                    ctx.lineTo(centerX + i * scaleX, height);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(0, centerY + i * scaleY);
                    ctx.lineTo(width, centerY + i * scaleY);
                    ctx.stroke();
                }
            }
            
            // 绘制函数曲线
            ctx.strokeStyle = '#ff0000';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            let first = true;
            for (let px = 0; px < width; px++) {
                const x = (px - centerX) / scaleX;
                const y = a * x * x + b * x + c;
                const py = centerY - y * scaleY;
                
                if (Math.abs(py) > height * 2) continue; // 跳过超出范围
                
                if (first) {
                    ctx.moveTo(px, py);
                    first = false;
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();
        }
        
        updateValues(); // 初始绘制
    </script>
</body>
</html>
